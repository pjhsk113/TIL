# [대규모 시스템 설계] 데이터 센터 구성

가용성을 높이고 전 세계 어디서도 쾌적한 서비스를 위해서는 여러 데이터 센터를 지원하는 것이 필수다.
일반적으로 사용자는 가장 가까운 데이터 센터로 안내되는데,이를 **지리적 라우팅**이라 부른다.

## 데이터 센터

지리적 라우팅에서의 geoDNS는 사용자의 위치에 따라 도메인 이름을 어떤 IP 주소로 변환할지 결정한다.

![](https://blog.kakaocdn.net/dn/ELZ4t/btruQjRhcXj/o3n9kKSRRoCxYWfeykaACK/img.png)

지리적 라우팅을 통해 각 데이터센터로 트래픽이 분산되어 안전한 시스템을 구성할 수 있다.
만약 데이터 센터1에 장애가 발생해도 모든 트래픽은 장애가 없는 데이터 센터2로 전송된다.

![](https://blog.kakaocdn.net/dn/T406F/btruWjJexdL/F5s0tWOkbyd5DSRlJ8JpoK/img.png)

## 다중 데이터 센터 구성 시 고려사항

다중 데이터 센터 아키텍처를 구성하기 위해선 몇 가지 기술적 난제를 해결해야 한다.
어떤 기술적 난제가 있는지 살펴보자.

### 트래픽 우회

올바른 데이터 센터로 트래픽을 보내는 효과적인 방법을 찾아야 한다.
geoDNS는 사용자에게서 가장 가까운 데이터센터로 트래픽을 보낼 수 있도록 해준다.

### 데이터 동기화

데이터 센터마다 별도의 데이터베이스를 사용하고 있는 상황이라면, 장애 발생 시 트래픽이 다른 데이터 센터로 우회된다고해도 해당 데이터 센터에는 찾는 데이터가 없을 수 있다.

이런 상황을 막는 보편적인 전략은 데이터를 여러 데이터 센터에 다중화하는 것이다.

### 테스트와 배포

여러 데이터 센터를 사용하도록 시스템이 구성되어 있다면 웹 또는 앱을 여러 위치에서 테스트해봐야 한다.
이때, 자동화된 배포 도구를 활용하면 모든 데이터 센터에 동일한 서비스가 설치되도록 할 수 있다.